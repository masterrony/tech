{"version":3,"sources":["../../src/controller/mainController.js"],"names":["authController","post","req","res","body","scs","msg","user","json","token","iat","Math","floor","Date","now","process","env","APP_KEY","expiresIn"],"mappings":";;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,iBAAiB,sBAAvB;;AAEAA,eAAeC,IAAf,CAAoB,GAApB,EAAyB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACtC,sBAAKD,IAAIE,IAAT,EAAe,gBAAwB;AAAA,MAArBC,GAAqB,QAArBA,GAAqB;AAAA,MAAhBC,GAAgB,QAAhBA,GAAgB;AAAA,MAAXC,IAAW,QAAXA,IAAW;;AACtC,MAAG,CAACF,GAAJ,EACC,OAAOF,IAAIK,IAAJ,CAAS,EAAEH,QAAF,EAAOC,QAAP,EAAT,CAAP;;AAED,MAAMG,QAAQ,wBACb,EAAEC,KAAKC,KAAKC,KAAL,CAAWC,KAAKC,GAAL,KAAa,IAAxB,CAAP,EADa,EAEbC,QAAQC,GAAR,CAAYC,OAFC,EAGb,EAAEC,WAAW,KAAb,EAHa,CAAd;;AAMA,SAAOf,IAAIK,IAAJ,CAAS,EAAEH,QAAF,EAAOE,UAAP,EAAaE,YAAb,EAAT,CAAP;AACA,EAXD;AAYA,CAbD;;kBAgBeT,c","file":"mainController.js","sourcesContent":["import { Router } from 'express'\r\nimport { sign } from \"jsonwebtoken\";\r\nimport { auth } from '../model/actions/UserModel'\r\n\r\nconst authController = Router()\r\n\r\nauthController.post('/', (req, res) => {\r\n\tauth(req.body, ({ scs, msg, user }) => {\r\n\t\tif(!scs)\r\n\t\t\treturn res.json({ scs, msg })\r\n\r\n\t\tconst token = sign(\r\n\t\t\t{ iat: Math.floor(Date.now() / 1000) },\r\n\t\t\tprocess.env.APP_KEY,\r\n\t\t\t{ expiresIn: '12h' }\r\n\t\t)\r\n\r\n\t\treturn res.json({ scs, user, token })\r\n\t})  \r\n})\r\n\r\n\r\nexport default authController"]}